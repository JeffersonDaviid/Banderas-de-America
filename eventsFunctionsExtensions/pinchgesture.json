{
  "author": "",
  "category": "Input",
  "extensionNamespace": "",
  "fullName": "Pinching gesture",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWdlc3R1cmUtcGluY2giIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMsOUExLDEgMCAwLDEgMTQsOEExLDEgMCAwLDEgMTUsOVYxMy40N0wxNi4yMSwxMy42TDIxLjE1LDE1LjhDMjEuNjcsMTYuMDQgMjIsMTYuNTYgMjIsMTcuMTRWMjEuNUMyMS45NywyMi4zMiAyMS4zMiwyMi45NyAyMC41LDIzSDE0QzEzLjYyLDIzIDEzLjI2LDIyLjg1IDEzLDIyLjU3TDguMSwxOC4zN0w4Ljg0LDE3LjZDOS4wMywxNy4zOSA5LjMsMTcuMjggOS41OCwxNy4yOEg5LjhMMTMsMTlWOU0xNCw1QzE1LjQyLDUgMTYuNzQsNS43NiAxNy40NSw3QzE4LjU2LDguOSAxNy45MSwxMS4zNSAxNiwxMi40NlYxMS4yM0MxNi42NCwxMC42NyAxNyw5Ljg1IDE3LDlBMywzIDAgMCwwIDE0LDZBMywzIDAgMCwwIDExLDlDMTEsOS44NSAxMS4zNiwxMC42NyAxMiwxMS4yM1YxMi40NkMxMC43NywxMS43NSAxMCwxMC40MyAxMCw5QTQsNCAwIDAsMSAxNCw1TTQsOUw3LDEySDVWMTVIM1YxMkgxTDQsOU00LDdMMSw0SDNWMUg1VjRIN0w0LDdNOSwxNEM5LjczLDE0IDEwLjQxLDE0LjE5IDExLDE0LjU0VjE1Ljc2QzEwLjQ3LDE1LjI5IDkuNzcsMTUgOSwxNUEzLDMgMCAwLDAgNiwxOEM2LDE5IDYuNSwxOS44NyA3LjIyLDIwLjQyTDkuMzEsMjJIOUE0LDQgMCAwLDEgNSwxOEE0LDQgMCAwLDEgOSwxNFoiIC8+PC9zdmc+",
  "name": "PinchGesture",
  "previewIconUrl": "https://resources.gdevelop-app.com/assets/Icons/gesture-pinch.svg",
  "shortDescription": "Move the camera or objects with pinching gestures.",
  "version": "1.0.0",
  "description": [
    "This extension allows to:",
    "* Move, rotate and/or zoom the camera according to pinch gestures",
    "* Move, rotate and optionally scale objects according to pinch gestures",
    "* Handle more specific needs with various expressions",
    "",
    "Limitations:",
    "* Only one pinching gesture is detected at a time"
  ],
  "origin": {
    "identifier": "PinchGesture",
    "name": "gdevelop-extension-store"
  },
  "tags": [
    "touch",
    "pinch",
    "gesture",
    "zoom",
    "rotate",
    "camera",
    "puzzle"
  ],
  "authorIds": [
    "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
  ],
  "dependencies": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onSceneLoaded",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "PinchGesture::SetCameraPinchLayer"
              },
              "parameters": [
                "",
                "\"\"",
                ""
              ]
            },
            {
              "type": {
                "value": "PinchGesture::SetCameraPinchConstraint"
              },
              "parameters": [
                "",
                "\"No constraint\"",
                ""
              ]
            },
            {
              "type": {
                "value": "PinchGesture::EnableCameraPinch"
              },
              "parameters": [
                "",
                "no",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Enable or disable camera pinch.",
      "fullName": "Enable or disable camera pinch",
      "functionType": "Action",
      "group": "Camera pinch",
      "name": "EnableCameraPinch",
      "sentence": "Enable camera pinch: _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "__PinchGesture.IsCameraPinchEnabled",
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "GetArgumentAsBoolean"
              },
              "parameters": [
                "\"Enable\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "__PinchGesture.IsCameraPinchEnabled",
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Enable camera pinch",
          "name": "Enable",
          "type": "yesorno"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check if camera pinch is enabled.",
      "fullName": "Camera pinch is enabled",
      "functionType": "Condition",
      "group": "Camera pinch",
      "name": "IsCameraPinchEnabled",
      "sentence": "Camera pinch is enabled",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "SceneVariableAsBoolean"
              },
              "parameters": [
                "__PinchGesture.IsCameraPinchEnabled",
                "True"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Choose the layer to move with pinch gestures.",
      "fullName": "Camera pinch layer",
      "functionType": "Action",
      "group": "Camera pinch",
      "name": "SetCameraPinchLayer",
      "sentence": "Choose the layer _PARAM1_ to move with pinch gestures",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarSceneTxt"
              },
              "parameters": [
                "__PinchGesture.CameraPinchLayer",
                "=",
                "GetArgumentAsString(\"Layer\")"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Change the camera pinch constraint.",
      "fullName": "Camera pinch constraints",
      "functionType": "Action",
      "group": "Camera pinch",
      "name": "SetCameraPinchConstraint",
      "sentence": "Change the camera pinch constraint to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "ModVarSceneTxt"
              },
              "parameters": [
                "__PinchGesture.CameraPinchConstraint",
                "=",
                "GetArgumentAsString(\"Constraint\")"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Constraint",
          "name": "Constraint",
          "supplementaryInformation": "[\"No constraint\",\"Zoom only\",\"Rotation only\",\"Zoom and rotation only\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Pinch the camera of a layer.",
      "fullName": "Pinch camera",
      "functionType": "Action",
      "group": "Camera pinch",
      "name": "PinchCamera",
      "private": true,
      "sentence": "Pinch the camera of layer: _PARAM1_ with constraint: _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "PinchGesture::IsPinching"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Save the initial state because the pinch is calculated from here."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.BeginningCameraCenterX",
                        "=",
                        "CameraCenterX(GetArgumentAsString(\"Layer\"))"
                      ]
                    },
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.BeginningCameraCenterY",
                        "=",
                        "CameraCenterY(GetArgumentAsString(\"Layer\"))"
                      ]
                    },
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.BeginningCameraAngle",
                        "=",
                        "CameraAngle(GetArgumentAsString(\"Layer\"))"
                      ]
                    },
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.BeginningCameraZoom",
                        "=",
                        "CameraZoom(GetArgumentAsString(\"Layer\"))"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Backup the camera state to revert pinch effect according to constraints."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.BackupCameraCenterX",
                    "=",
                    "CameraCenterX(GetArgumentAsString(\"Layer\"))"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.BackupCameraCenterY",
                    "=",
                    "CameraCenterY(GetArgumentAsString(\"Layer\"))"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.BackupCameraAngle",
                    "=",
                    "CameraAngle(GetArgumentAsString(\"Layer\"))"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.BackupCameraZoom",
                    "=",
                    "CameraZoom(GetArgumentAsString(\"Layer\"))"
                  ]
                }
              ]
            },
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "name": "Pinch the camera",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetCameraCenterX"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraCenterX)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetCameraCenterY"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraCenterY)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetCameraAngle"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraAngle)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "ZoomCamera"
                      },
                      "parameters": [
                        "",
                        "Variable(__PinchGesture.BeginningCameraZoom)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.DeltaX",
                        "=",
                        "PinchGesture::InversedX(Variable(__PinchGesture.BeginningCameraCenterX), Variable(__PinchGesture.BeginningCameraCenterY), GetArgumentAsString(\"Layer\")) - Variable(__PinchGesture.BeginningCameraCenterX)"
                      ]
                    },
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.DeltaY",
                        "=",
                        "PinchGesture::InversedY(Variable(__PinchGesture.BeginningCameraCenterX), Variable(__PinchGesture.BeginningCameraCenterY), GetArgumentAsString(\"Layer\")) - Variable(__PinchGesture.BeginningCameraCenterY)"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "SetCameraCenterX"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraCenterX) + Variable(__PinchGesture.DeltaX)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetCameraCenterY"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraCenterY) + Variable(__PinchGesture.DeltaY)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetCameraAngle"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BeginningCameraAngle) - PinchGesture::Rotation()",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "ZoomCamera"
                      },
                      "parameters": [
                        "",
                        "Variable(__PinchGesture.BeginningCameraZoom) * PinchGesture::Scaling()",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": []
            },
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "name": "Apply constraints",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::CompareStrings"
                      },
                      "parameters": [
                        "GetArgumentAsString(\"Constraint\")",
                        "!=",
                        "\"No constraint\""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetCameraCenterX"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BackupCameraCenterX)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "SetCameraCenterY"
                      },
                      "parameters": [
                        "",
                        "=",
                        "Variable(__PinchGesture.BackupCameraCenterY)",
                        "GetArgumentAsString(\"Layer\")",
                        ""
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::CompareStrings"
                          },
                          "parameters": [
                            "GetArgumentAsString(\"Constraint\")",
                            "=",
                            "\"Zoom only\""
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "SetCameraAngle"
                          },
                          "parameters": [
                            "",
                            "=",
                            "Variable(__PinchGesture.BackupCameraAngle)",
                            "GetArgumentAsString(\"Layer\")",
                            ""
                          ]
                        }
                      ]
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::CompareStrings"
                          },
                          "parameters": [
                            "GetArgumentAsString(\"Constraint\")",
                            "=",
                            "\"Rotation only\""
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ZoomCamera"
                          },
                          "parameters": [
                            "",
                            "Variable(__PinchGesture.BackupCameraZoom)",
                            "GetArgumentAsString(\"Layer\")",
                            ""
                          ]
                        }
                      ]
                    }
                  ]
                }
              ],
              "parameters": []
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        },
        {
          "description": "Constraint",
          "name": "Constraint",
          "supplementaryInformation": "[\"No constraint\",\"Zoom only\",\"Rotation only\",\"Zoom and rotation only\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onScenePreEvents",
      "sentence": "",
      "events": [
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Touch end",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarScene"
                  },
                  "parameters": [
                    "__PinchGesture.TouchCount",
                    "=",
                    "1"
                  ]
                },
                {
                  "type": {
                    "value": "HasTouchEnded"
                  },
                  "parameters": [
                    "",
                    "Variable(__PinchGesture.FirstTouchId)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.TouchCount",
                    "=",
                    "0"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarScene"
                  },
                  "parameters": [
                    "__PinchGesture.TouchCount",
                    "=",
                    "2"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "HasTouchEnded"
                      },
                      "parameters": [
                        "",
                        "Variable(__PinchGesture.SecondTouchId)"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.TouchCount",
                        "-",
                        "1"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "HasTouchEnded"
                      },
                      "parameters": [
                        "",
                        "Variable(__PinchGesture.FirstTouchId)"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "__PinchGesture.TouchCount",
                        "-",
                        "1"
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Comment",
                      "color": {
                        "b": 109,
                        "g": 230,
                        "r": 255,
                        "textB": 0,
                        "textG": 0,
                        "textR": 0
                      },
                      "comment": "The 2nd touch becomes the 1st one."
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarScene"
                          },
                          "parameters": [
                            "__PinchGesture.TouchCount",
                            "=",
                            "1"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.FirstTouchId",
                            "=",
                            "Variable(__PinchGesture.SecondTouchId)"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Touch start",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Pinch with more than 2 touches is not handled."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "HasAnyTouchStarted"
                  },
                  "parameters": [
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "VarScene"
                  },
                  "parameters": [
                    "__PinchGesture.TouchCount",
                    "<",
                    "2"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.Index",
                    "=",
                    "0"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Repeat",
                  "repeatExpression": "StartedTouchCount()",
                  "conditions": [],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Comment",
                      "color": {
                        "b": 109,
                        "g": 230,
                        "r": 255,
                        "textB": 0,
                        "textG": 0,
                        "textR": 0
                      },
                      "comment": "2nd touch started: save the 2 touches locations"
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarScene"
                          },
                          "parameters": [
                            "__PinchGesture.TouchCount",
                            "=",
                            "1"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.TouchCount",
                            "=",
                            "2"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.SecondTouchId",
                            "=",
                            "StartedTouchId(Variable(__PinchGesture.Index))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.SecondTouchX",
                            "=",
                            "PinchGesture::TouchCanvasX(StartedTouchId(Variable(__PinchGesture.Index)))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.SecondTouchY",
                            "=",
                            "PinchGesture::TouchCanvasY(StartedTouchId(Variable(__PinchGesture.Index)))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.FirstTouchX",
                            "=",
                            "PinchGesture::TouchCanvasX(Variable(__PinchGesture.FirstTouchId))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.FirstTouchY",
                            "=",
                            "PinchGesture::TouchCanvasY(Variable(__PinchGesture.FirstTouchId))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.BeginningAngle",
                            "=",
                            "AngleBetweenPositions\n(\n  Variable(__PinchGesture.FirstTouchX),\n  Variable(__PinchGesture.FirstTouchY),\n  Variable(__PinchGesture.SecondTouchX),\n  Variable(__PinchGesture.SecondTouchY)\n)"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.BeginningDistance",
                            "=",
                            "DistanceBetweenPositions\n(\n  Variable(__PinchGesture.FirstTouchX),\n  Variable(__PinchGesture.FirstTouchY),\n  Variable(__PinchGesture.SecondTouchX),\n  Variable(__PinchGesture.SecondTouchY)\n)"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.BeginningCenterX",
                            "=",
                            "(Variable(__PinchGesture.FirstTouchX) + Variable(__PinchGesture.SecondTouchX)) / 2"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.BeginningCenterY",
                            "=",
                            "(Variable(__PinchGesture.FirstTouchY) + Variable(__PinchGesture.SecondTouchY)) / 2"
                          ]
                        },
                        {
                          "type": {
                            "value": "DebuggerTools::ConsoleLog"
                          },
                          "parameters": [
                            "\"distance: \" + VariableString(__PinchGesture.BeginningDistance)",
                            "",
                            ""
                          ]
                        }
                      ]
                    },
                    {
                      "type": "BuiltinCommonInstructions::Comment",
                      "color": {
                        "b": 109,
                        "g": 230,
                        "r": 255,
                        "textB": 0,
                        "textG": 0,
                        "textR": 0
                      },
                      "comment": "It's important to do this case after because TouchCount is incremented in this loop (0 to 1 and 1 to 2 must not happen with the same touch event)."
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarScene"
                          },
                          "parameters": [
                            "__PinchGesture.TouchCount",
                            "=",
                            "0"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.FirstTouchId",
                            "=",
                            "StartedTouchId(Variable(__PinchGesture.Index))"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.TouchCount",
                            "=",
                            "1"
                          ]
                        }
                      ]
                    },
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarScene"
                          },
                          "parameters": [
                            "__PinchGesture.Index",
                            "+",
                            "1"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "colorB": 228,
          "colorG": 176,
          "colorR": 74,
          "creationTime": 0,
          "name": "Pinching",
          "source": "",
          "type": "BuiltinCommonInstructions::Group",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarScene"
                  },
                  "parameters": [
                    "__PinchGesture.TouchCount",
                    "=",
                    "2"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.CurrentAngle",
                    "=",
                    "AngleBetweenPositions\n(\n  PinchGesture::TouchCanvasX(Variable(__PinchGesture.FirstTouchId)),\n  PinchGesture::TouchCanvasY(Variable(__PinchGesture.FirstTouchId)),\n  PinchGesture::TouchCanvasX(Variable(__PinchGesture.SecondTouchId)),\n  PinchGesture::TouchCanvasY(Variable(__PinchGesture.SecondTouchId))\n)"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.CurrentDistance",
                    "=",
                    "DistanceBetweenPositions\n(\n  PinchGesture::TouchCanvasX(Variable(__PinchGesture.FirstTouchId)),\n  PinchGesture::TouchCanvasY(Variable(__PinchGesture.FirstTouchId)),\n  PinchGesture::TouchCanvasX(Variable(__PinchGesture.SecondTouchId)),\n  PinchGesture::TouchCanvasY(Variable(__PinchGesture.SecondTouchId))\n)"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.CurrentCenterX",
                    "=",
                    "(PinchGesture::TouchCanvasX(Variable(__PinchGesture.FirstTouchId)) + PinchGesture::TouchCanvasX(Variable(__PinchGesture.SecondTouchId))) / 2"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "__PinchGesture.CurrentCenterY",
                    "=",
                    "(PinchGesture::TouchCanvasY(Variable(__PinchGesture.FirstTouchId)) + PinchGesture::TouchCanvasY(Variable(__PinchGesture.SecondTouchId))) / 2"
                  ]
                }
              ]
            }
          ],
          "parameters": []
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "PinchGesture::IsCameraPinchEnabled"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "PinchGesture::PinchCamera"
              },
              "parameters": [
                "",
                "VariableString(__PinchGesture.CameraPinchLayer)",
                "VariableString(__PinchGesture.CameraPinchConstraint)",
                ""
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Check if a touch is pinching, if 2 touches are pressed.",
      "fullName": "Touch is pinching",
      "functionType": "Condition",
      "name": "IsPinching",
      "sentence": "Touch is pinching",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarScene"
              },
              "parameters": [
                "__PinchGesture.TouchCount",
                "=",
                "2"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Return the scaling of the pinch gesture from its beginning.",
      "fullName": "Pinch scaling",
      "functionType": "Expression",
      "name": "Scaling",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__PinchGesture.CurrentDistance) / Variable(__PinchGesture.BeginningDistance)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Return the rotation of the pinch gesture from its beginning (in degrees).",
      "fullName": "Pinch rotation",
      "functionType": "Expression",
      "name": "Rotation",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(__PinchGesture.CurrentAngle) - Variable(__PinchGesture.BeginningAngle)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Return the X position of the pinch center at the beginning of the gesture.",
      "fullName": "Pinch beginning center X",
      "functionType": "Expression",
      "name": "BeginningCenterX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToSceneX(Variable(__PinchGesture.BeginningCenterX), Variable(__PinchGesture.BeginningCenterY), GetArgumentAsString(\"Layer\"))"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the Y position of the pinch center at the beginning of the gesture.",
      "fullName": "Pinch beginning center Y",
      "functionType": "Expression",
      "name": "BeginningCenterY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToSceneY(Variable(__PinchGesture.BeginningCenterX), Variable(__PinchGesture.BeginningCenterY), GetArgumentAsString(\"Layer\"))"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the X position of the pinch center.",
      "fullName": "Pinch center X",
      "functionType": "Expression",
      "name": "CurrentCenterX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToSceneX(Variable(__PinchGesture.CurrentCenterX), Variable(__PinchGesture.CurrentCenterY), GetArgumentAsString(\"Layer\"))"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the Y position of the pinch center.",
      "fullName": "Pinch center Y",
      "functionType": "Expression",
      "name": "CurrentCenterY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToSceneY(Variable(__PinchGesture.CurrentCenterX), Variable(__PinchGesture.CurrentCenterY), GetArgumentAsString(\"Layer\"))"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the horizontal translation of the pinch gesture from its beginning.",
      "fullName": "Pinch translation X",
      "functionType": "Expression",
      "name": "TranslationX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::CurrentCenterX(\"Layer\") - PinchGesture::BeginningCenterX(\"Layer\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the vertical translation of the pinch gesture from its beginning.",
      "fullName": "Pinch translation Y",
      "functionType": "Expression",
      "name": "TranslationY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::CurrentCenterY(\"Layer\") - PinchGesture::BeginningCenterY(\"Layer\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the new X position of a point after the pinch gesture.",
      "fullName": "Transform X position",
      "functionType": "Expression",
      "name": "TransformedX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::CurrentCenterX(\"Layer\") + PinchGesture::Scaling() * PinchGesture::RotatedVectorX(\n  GetArgumentAsNumber(\"PositionX\") - PinchGesture::BeginningCenterX(\"Layer\"),\n  GetArgumentAsNumber(\"PositionY\") - PinchGesture::BeginningCenterY(\"Layer\"),\n  PinchGesture::Rotation()\n)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X before the pinch",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y before the pinch",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the new Y position of a point after the pinch gesture.",
      "fullName": "Transform Y position",
      "functionType": "Expression",
      "name": "TransformedY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::CurrentCenterY(\"Layer\") + PinchGesture::Scaling() * PinchGesture::RotatedVectorY(\n  GetArgumentAsNumber(\"PositionX\") - PinchGesture::BeginningCenterX(\"Layer\"),\n  GetArgumentAsNumber(\"PositionY\") - PinchGesture::BeginningCenterY(\"Layer\"),\n  PinchGesture::Rotation()\n)"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X before the pinch",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y before the pinch",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the original X position of a point before the pinch gesture.",
      "fullName": "Inversed transform X position",
      "functionType": "Expression",
      "name": "InversedX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::BeginningCenterX(\"Layer\") + PinchGesture::RotatedVectorX\n(\n  GetArgumentAsNumber(\"PositionX\") - PinchGesture::CurrentCenterX(\"Layer\"),\n  GetArgumentAsNumber(\"PositionY\") - PinchGesture::CurrentCenterY(\"Layer\"),\n  -PinchGesture::Rotation()\n) / PinchGesture::Scaling()"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X after the pinch",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y after the pinch",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the new position on the Y axis of a point after the pinch gesture.",
      "fullName": "Inversed transform Y position",
      "functionType": "Expression",
      "name": "InversedY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::BeginningCenterY(\"Layer\") + PinchGesture::RotatedVectorY\n(\n  GetArgumentAsNumber(\"PositionX\") - PinchGesture::CurrentCenterX(\"Layer\"),\n  GetArgumentAsNumber(\"PositionY\") - PinchGesture::CurrentCenterY(\"Layer\"),\n  -PinchGesture::Rotation()\n) / PinchGesture::Scaling()"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X after the pinch",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y after the pinch",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the X coordinate of a position transformed from the scene to the canvas according to a layer.",
      "fullName": "Transform X to canvas",
      "functionType": "Expression",
      "name": "TransformToCanvasX",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const x = eventsFunctionContext.getArgument(\"PositionX\");\r",
            "const y = eventsFunctionContext.getArgument(\"PositionY\");\r",
            "const layer = runtimeScene.getLayer(eventsFunctionContext.getArgument(\"Layer\"));\r",
            "\r",
            "eventsFunctionContext.returnValue = layer.convertInverseCoords(x, y)[0];"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the Y coordinate of a position transformed from the scene to the canvas according to a layer.",
      "fullName": "Transform Y to canvas",
      "functionType": "Expression",
      "name": "TransformToCanvasY",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const x = eventsFunctionContext.getArgument(\"PositionX\");\r",
            "const y = eventsFunctionContext.getArgument(\"PositionY\");\r",
            "const layer = runtimeScene.getLayer(eventsFunctionContext.getArgument(\"Layer\"));\r",
            "\r",
            "eventsFunctionContext.returnValue = layer.convertInverseCoords(x, y)[1];"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the X coordinate of a position transformed from the canvas to the scene according to a layer.",
      "fullName": "Transform X to scene",
      "functionType": "Expression",
      "name": "TransformToSceneX",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const x = eventsFunctionContext.getArgument(\"PositionX\");\r",
            "const y = eventsFunctionContext.getArgument(\"PositionY\");\r",
            "const layer = runtimeScene.getLayer(eventsFunctionContext.getArgument(\"Layer\"));\r",
            "\r",
            "eventsFunctionContext.returnValue = layer.convertCoords(x, y)[0];"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the Y coordinate of a position transformed from the canvas to the scene according to a layer.",
      "fullName": "Transform Y to scene",
      "functionType": "Expression",
      "name": "TransformToSceneY",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const x = eventsFunctionContext.getArgument(\"PositionX\");\r",
            "const y = eventsFunctionContext.getArgument(\"PositionY\");\r",
            "const layer = runtimeScene.getLayer(eventsFunctionContext.getArgument(\"Layer\"));\r",
            "\r",
            "eventsFunctionContext.returnValue = layer.convertCoords(x, y)[1];"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Position X",
          "name": "PositionX",
          "type": "expression"
        },
        {
          "description": "Position Y",
          "name": "PositionY",
          "type": "expression"
        },
        {
          "description": "Layer",
          "name": "Layer",
          "type": "layer"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the touch X on the canvas.",
      "fullName": "Touch X on canvas",
      "functionType": "Expression",
      "name": "TouchCanvasX",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToCanvasX(TouchX(GetArgumentAsNumber(\"TouchId\")), TouchY(GetArgumentAsNumber(\"TouchId\")), \"\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Touch identifier",
          "name": "TouchId",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the touch Y on the canvas.",
      "fullName": "Touch Y on canvas",
      "functionType": "Expression",
      "name": "TouchCanvasY",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "PinchGesture::TransformToCanvasY(TouchX(GetArgumentAsNumber(\"TouchId\")), TouchY(GetArgumentAsNumber(\"TouchId\")), \"\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Touch identifier",
          "name": "TouchId",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the X coordinate of a vector after a rotation",
      "fullName": "Rotated vector X",
      "functionType": "Expression",
      "name": "RotatedVectorX",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "cos(ToRad(GetArgumentAsNumber(\"Angle\"))) * GetArgumentAsNumber(\"VectorX\") - sin(ToRad(GetArgumentAsNumber(\"Angle\"))) * GetArgumentAsNumber(\"VectorY\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Vector X",
          "name": "VectorX",
          "type": "expression"
        },
        {
          "description": "Vector Y",
          "name": "VectorY",
          "type": "expression"
        },
        {
          "description": "Angle (in degrees)",
          "name": "Angle",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the Y coordinate of a vector after a rotation",
      "fullName": "Rotated vector Y",
      "functionType": "Expression",
      "name": "RotatedVectorY",
      "private": true,
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetReturnNumber"
              },
              "parameters": [
                "sin(ToRad(GetArgumentAsNumber(\"Angle\"))) * GetArgumentAsNumber(\"VectorX\") + cos(ToRad(GetArgumentAsNumber(\"Angle\"))) * GetArgumentAsNumber(\"VectorY\")"
              ]
            }
          ]
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Vector X",
          "name": "VectorX",
          "type": "expression"
        },
        {
          "description": "Vector Y",
          "name": "VectorY",
          "type": "expression"
        },
        {
          "description": "Angle (in degrees)",
          "name": "Angle",
          "type": "expression"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [
    {
      "description": "Move objects by holding 2 touches on them.",
      "fullName": "Pinchable object",
      "name": "Pichable",
      "objectType": "Sprite",
      "eventsFunctions": [
        {
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PinchGesture::IsPinching"
                  },
                  "parameters": [
                    "",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Only the objects with the highest Z-Order will be actually pinched (see doStepPostEvents)."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "CollisionPoint"
                      },
                      "parameters": [
                        "Object",
                        "PinchGesture::CurrentCenterX(Object.Layer())",
                        "PinchGesture::CurrentCenterY(Object.Layer())"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyIsCandidate"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "yes"
                      ]
                    },
                    {
                      "type": {
                        "value": "ModVarScene"
                      },
                      "parameters": [
                        "PinchGesture.ZOrderMaximum",
                        "=",
                        "max(Variable(PinchGesture.ZOrderMaximum), Object.ZOrder())"
                      ]
                    },
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyBeginningCenterX"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.CenterX()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyBeginningCenterY"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.CenterY()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyBeginningAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Angle()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyBeginningWidth"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Width()"
                      ]
                    },
                    {
                      "type": {
                        "value": "PinchGesture::Pichable::SetPropertyBeginningHeight"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Height()"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Move the object according to the pinch gesture."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::PropertyIsPinched"
                  },
                  "parameters": [
                    "Object",
                    "Behavior"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetCenterX"
                  },
                  "parameters": [
                    "Object",
                    "=",
                    "PinchGesture::TransformedX(Object. Behavior::PropertyBeginningCenterX(), Object. Behavior::PropertyBeginningCenterY(), Object.Layer())"
                  ]
                },
                {
                  "type": {
                    "value": "SetCenterY"
                  },
                  "parameters": [
                    "Object",
                    "=",
                    "PinchGesture::TransformedY(Object. Behavior::PropertyBeginningCenterX(), Object. Behavior::PropertyBeginningCenterY(), Object.Layer())"
                  ]
                },
                {
                  "type": {
                    "value": "SetAngle"
                  },
                  "parameters": [
                    "Object",
                    "=",
                    "Object. Behavior::PropertyBeginningAngle() + PinchGesture::Rotation()"
                  ]
                }
              ],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": true,
                        "value": "PinchGesture::Pichable::PropertyLockSize"
                      },
                      "parameters": [
                        "Object",
                        "Behavior"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ChangeWidth"
                      },
                      "parameters": [
                        "Object",
                        "=",
                        "Object.Behavior::PropertyBeginningWidth() * PinchGesture::Scaling()"
                      ]
                    },
                    {
                      "type": {
                        "value": "ChangeHeight"
                      },
                      "parameters": [
                        "Object",
                        "=",
                        "Object.Behavior::PropertyBeginningHeight() * PinchGesture::Scaling()"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "PinchGesture::IsPinching"
                  },
                  "parameters": [
                    "",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::SetPropertyIsPinched"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "no"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "PinchGesture.ZOrderMaximum",
                    "=",
                    "0"
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "PinchGesture::Pichable",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPostEvents",
          "sentence": "",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Only the objects with the highest Z-Order are actually pinched.\nIf all objects have the same Z-Order, they can all be picked at once."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::PropertyIsCandidate"
                  },
                  "parameters": [
                    "Object",
                    "Behavior"
                  ]
                },
                {
                  "type": {
                    "value": "Plan"
                  },
                  "parameters": [
                    "Object",
                    ">=",
                    "Variable(PinchGesture.ZOrderMaximum)"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::SetPropertyIsPinched"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "yes"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::SetPropertyIsCandidate"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "no"
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "PinchGesture::Pichable",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Check if the object is being pinched.",
          "fullName": "Is being pinched",
          "functionType": "Condition",
          "name": "IsPinched",
          "sentence": "_PARAM0_ is being pinched",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::PropertyIsPinched"
                  },
                  "parameters": [
                    "Object",
                    "Behavior"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "PinchGesture::Pichable",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Abort the pinching of this object.",
          "fullName": "Abort pinching",
          "functionType": "Action",
          "name": "AbortPinching",
          "sentence": "Abort the pinching of _PARAM0_",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "PinchGesture::Pichable::SetPropertyIsPinched"
                  },
                  "parameters": [
                    "Object",
                    "Behavior",
                    "no"
                  ]
                }
              ]
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "supplementaryInformation": "Sprite",
              "type": "object"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "PinchGesture::Pichable",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "",
          "type": "Boolean",
          "label": "Lock object size",
          "description": "",
          "group": "",
          "extraInformation": [],
          "name": "LockSize"
        },
        {
          "value": "",
          "type": "Boolean",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "IsCandidate"
        },
        {
          "value": "",
          "type": "Boolean",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "IsPinched"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BeginningCenterX"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BeginningCenterY"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BeginningAngle"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BeginningWidth"
        },
        {
          "value": "",
          "type": "Number",
          "label": "",
          "description": "",
          "group": "",
          "extraInformation": [],
          "hidden": true,
          "name": "BeginningHeight"
        }
      ],
      "sharedPropertyDescriptors": []
    }
  ],
  "eventsBasedObjects": []
}